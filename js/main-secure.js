var secureAPI=new SecureAPI;let encryptedAccessLink="";async function testAPIConnection(){try{let e=await secureAPI.healthCheck();console.log("✅ API Connection successful:",e),showNotification("API Connected Successfully","success")}catch(e){console.error("❌ API Connection failed:",e),showNotification("API Connection Failed - Check console for details","error")}}function initializeEventListeners(){let e=document.getElementById("passwordInput");e&&e.addEventListener("keypress",(e=>"Enter"===e.key&&checkPassword()))}function hideLoadingScreen(){let e=document.getElementById("loadingScreen");e&&(e.style.opacity="0",setTimeout((()=>{e.style.display="none"}),500))}async function checkPassword(){let e=document.getElementById("passwordInput"),t=e.value.trim(),s=document.querySelector(".access-btn"),n=s.innerHTML;if(!t)return showError("Please enter an access code");s.innerHTML='<i class="fas fa-spinner fa-spin"></i> Verifying...',s.disabled=!0;try{let e=await secureAPI.verifyDevCode(t);if(e.success&&e.url){encryptedAccessLink=e.url,showSuccess("Access granted!");setTimeout((()=>{let t=document.createElement("script");t.src=encryptedAccessLink,t.onload=()=>console.log("[DEV-INJECT] Tool loaded"),document.body.appendChild(t);document.querySelector(".access-form")&&(document.querySelector(".access-form").style.display="none"),history.replaceState({},document.title,window.location.pathname)}),1000)}else showError(e.error||"Invalid access code")}catch(e){console.error("Password verification error:",e),showError("Connection error. Please try again.")}finally{s.innerHTML=n,s.disabled=!1,e.value=""}}function showError(e){let t=document.getElementById("errorMsg")?.querySelector(".message-text");t&&(t.textContent=e),document.getElementById("errorMsg").style.display="flex",setTimeout((()=>{document.getElementById("errorMsg").style.display="none"}),5e3)}function showSuccess(e){let t=document.getElementById("successMsg")?.querySelector(".message-text");t&&(t.textContent=e),document.getElementById("successMsg").style.display="flex",setTimeout((()=>{document.getElementById("successMsg").style.display="none"}),5e3)}function showNotification(e,t="info"){let s=document.createElement("div");s.className=`notification notification-${t}`,s.innerHTML=`<i class="fas fa-${"success"===t?"check-circle":"error"===t?"exclamation-triangle":"info-circle"}"></i><span>${e}</span>`,(document.getElementById("notificationContainer")||document.body).appendChild(s),setTimeout((()=>s.classList.add("show")),10),setTimeout((()=>{s.classList.remove("show"),setTimeout((()=>s.remove()),300)}),4e3)}document.addEventListener("DOMContentLoaded",(()=>{console.log("🚀 Rico World - Dev Tool Ready"),testAPIConnection(),initializeEventListeners(),setTimeout(hideLoadingScreen,2e3)})),window.checkPassword=checkPassword;
